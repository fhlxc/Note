# 用户身份与文件权限
### 1. 用户身份与能力
- useradd：创建新的用户  

参数 | 作用
-- | --
-d | 指定用户的家目录（默认为/home/username）
-e | 账户到期时间，格式为YYYY-MM-DD
-u | 指定用户的默认UID
-g | 指定一个初始的用户基本组（必须已存在）
-G | 指定一个或者多个扩展用户组
-N | 不创建与用户同名的基本用户组
-s | 指定该用户默认的Shell解释器
- groupadd：创建用户组
- usermod：修改用户属性  

参数 | 作用
-- | --
-c | 填写用户账户的备注信息
-d -m | 重新指定用户的家目录，并自动把旧的数据转移过去
-e | 用户的到期时间
-g | 变更所属用户组
-G | 变更扩展用户组
-L  | 锁定用户禁止其登录系统
-U | 解锁用户，允许其登录系统
-s | 变更默认终端
-u | 修改用户的UID
- passwd：修改用户密码、过期时间、认证信息等  

参数 | 作用
-- | --
-l | 锁定用户，禁止其登录系统
-u | 解锁用户。允许其登录系统
--stdin | 通过标准输入修改用户密码
-d | 使该用户可用空密码登录系统
-e | 强制用户在下次登录时修改密码
-S | 显示用户的密码是否被锁定，以及密码所采用的加密算法名称
- userdel：删除用户  

参数 | 作用
-- | --
-f | 强制删除用户
-r | 同时删除用户及用户家目录
### 2. 文件权限与归属
- 常见文件的字符（以不同字符区分文件类型）  

字符 | 文件的类型
-- | --
- | 普通文件
d | 目录文件
l | 链接文件
b | 块设备文件
c | 字符设备文件
p | 管道文件
- 文件权限的字符与数字的表示  
<table>
    <tr>
        <th>权限分配</th>
        <th colspan="3">文件所有者</th>
        <th colspan="3">文件所属组</th>
        <th colspan="3">其它用户</th>
    </tr>
    <tr>
        <th>权限项</th>
        <th>读</th>
        <th>写</th>
        <th>执行</th>
        <th>读</th>
        <th>写</th>
        <th>执行</th>
        <th>读</th>
        <th>写</th>
        <th>执行</th>
    </tr>
    <tr>
        <th>字符表示</th>
        <th>r</th>
        <th>w</th>
        <th>x</th>
        <th>r</th>
        <th>w</th>
        <th>x</th>
        <th>r</th>
        <th>w</th>
        <th>x</th>
    </tr>
    <tr>
        <th>数字表示</th>
        <th>4</th>
        <th>2</th>
        <th>1</th>
        <th>4</th>
        <th>2</th>
        <th>1</th>
        <th>4</th>
        <th>2</th>
        <th>1</th>
    </tr>
</table>
- 文件的特殊权限

权限 | 作用  
-- | --
SUID | 对二进制文件进行设置的特殊权限，可以让二进制程序的执行者临时拥有属主的权限  
SGID | 让执行者临时拥有属主的权限和在某个目录中创建的文件自动继承该目录的用户组  
SBIT | 确保用户只能删除自己的文件，而不能删除其他用户的文件
### 3. 文件的隐藏属性
- chattr：用于设置文件的隐藏权限

参数 | 作用  
-- | --  
i | 无法对文件进行修改；若对目录设置了该参数，则仅能修改其中的子文件内容而不能新建或者删除文件  
a | 仅允许补充内容，无法覆盖或者删除内容  
S | 文件内容在变更后立即同步到磁盘  
s | 彻底从硬盘中删除，不可恢复  
A | 不再修改这个文件或目录的最后访问时间  
b | 不再修改文件或目录的存取时间  
D | 检查压缩文件中的错误  
d | 使用dump命令备份时忽略本文件或者目录  
c | 默认将文件或目录进行压缩
u | 当删除该文件后依然保留其在硬盘中的数据，方便日后恢复  
t | 让文件支持尾部合并  
X | 可以直接访问压缩文件中的内容
- lsattr：显示文件的隐藏权限
### 4. 文件访问控制列表
- setfacl：管理文件的ACL规则
- getfacl：显示文件上设置的ACL信息
### 5. su命令与sudo服务
- su：平滑切换用户身份 su与用户名之间的-表示完全彻底的切换到新用户（包括环境变量）
- sudo：用于给普通用户提供额外的权限来完成原本root管理员才能完成的任务

参数 | 作用  
-- | --  
-h | 列出帮助信息  
-l | 列出当前用户可执行的命令  
-u用户名 | 以指定的用户身份执行命令  
-k | 清空密码的有效时间，下次执行sudo时需要输入密码  
-b | 在后台执行指定的命令  
-p | 更改询问密码的提示语